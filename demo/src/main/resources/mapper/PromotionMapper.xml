<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.promotion.mapper.PromotionMapper">

    <select id="selectActivePromotionProducts" resultType="com.example.promotion.model.PromotionProduct">
        SELECT
            A.PROD_CD,
            A.PROD_NM,
            B.PROMO_PRICE,
            B.START_DT,
            B.END_DT
        FROM TB_PRODUCT A
        JOIN TB_PROMOTION B ON A.PROD_CD = B.PROD_CD
        WHERE A.USE_YN = 'Y'
          AND TO_CHAR(SYSDATE, 'YYYYMMDD') BETWEEN B.START_DT AND B.END_DT
    </select>

</mapper>